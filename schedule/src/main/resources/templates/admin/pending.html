<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8" />
  <title>申請一覧</title>
</head>

<body>
  <h1>ユーザ登録申請一覧</h1>
  <div th:if="${param.error}" style="color:red;" th:text="${param.error}"></div>
  <div th:if="${param.message}" style="color:green;" th:text="${param.message}"></div>

  <table border="1" cellpadding="6">
    <thead>
      <tr>
        <th>ID</th>
        <th>ユーザ名</th>
        <th>メール</th>
        <th>申請日時</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      <tr th:each="p : ${pendings}">
        <td th:text="${p.id}">1</td>
        <td th:text="${p.username}">user</td>
        <td th:text="${p.email}">email</td>
        <td th:text="${#temporals.format(p.createdAt,'yyyy-MM-dd HH:mm')}">日時</td>
        <td>
          <form th:action="@{/admin/pending/approve/{id}(id=${p.id})}" method="post" style="display:inline;">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            <button type="submit">承認</button>
          </form>
          <form th:action="@{/admin/pending/reject/{id}(id=${p.id})}" method="post" style="display:inline;">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            <button type="submit">却下</button>
          </form>
        </td>
      </tr>
    </tbody>
  </table>

  <p><a th:href="@{/}">トップへ</a></p>
</body>

</html>
